{% extends 'BbLigueBundle:Layout:layout.html.twig' %}

{% block body %}
    <section id="espace-coach" class="content normal-content clearfix">
        <header class="section-header clearfix padding-me">
            <h1 class="section-title">{{ 'layout.coach_space.index.my_teams'|trans }}</h1>
            <ul class="section-actions">
                <li><a class="button button-basic" href="{{ path("team_add") }}">{{ 'layout.coach_space.index.team_add'|trans }}</a></li>
            </ul>
        </header>
        <div class="teams clearfix">
            {% for team in coach.teams %}
                <article class="team clearfix padding-me">
                    <div class="wrapper relative clearfix">
                        <header class="team-header clearfix">
                            <div class="team-logo">Le Logo</div>
                            <h3 class="team-name">{{ team.name }}</h3>
                            <div class="team-metas clearfix">
                                <span class="race">
                                    {% set racename = 'blood_bowl.rosters.' ~ team.roster ~ '.title' %}
                                    {{ racename|trans({},'bb-dictionnary') }}
                                </span>
                                <span class="ligue"><span class="name">{{ team.ligue.name }}</span> <span class="format">(Format)</span></span>
                            </div>
                        </header>
                        <footer class="team-footer clearfix">
                            <ul class="team-actions">
                                <li><a class="button button-ok" href="{{ path("team_edit", {team_id: team.id}) }}">{{ 'layout.coach_space.index.team_edit'|trans }}</a></li>
                                <li><a class="button button-not" href="#">{{ 'layout.coach_space.index.team_delete'|trans }}</a></li>
                            </ul>
                        </footer>
                        <div>
                            {% set last_journey = team.getLastJourney %}
                            <table class="stats-container clearfix">
                                <tr>
                                    <td class="block-main-stats">
                                        <table class="stats-table main-stats clearfix">
                                            <tr>
                                                <td>
                                                    <span class="label">{{ 'layout.values.tr'|trans }}</span>
                                                    <span class="value">{{ last_journey ? last_journey.tr : '0' }}</span>
                                                </td>
                                                <td>
                                                    <span class="label">{{ 'layout.values.treasure'|trans }}</span>
                                                    <span class="value">{{ last_journey ? last_journey.treasure|bbkpo|raw : '-' }}</span>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                    <td>
                                        <table class="stats-table clearfix">
                                            <tr>
                                                <td>
                                                    <table class="clearfix details-table">
                                                        <tr>
                                                            <td class="stats-table-like">
                                                                <span class="label">{{ 'layout.values.points'|trans }}</span>
                                                                <span class="value">{{ last_journey ? last_journey.points : '-' }}</span>
                                                            </td>
                                                            <td>
                                                                <table class="clearfix lines-table">
                                                                    <tr>
                                                                        <td>
                                                                            <span class="label">{{ 'layout.values.victory'|trans }}</span>
                                                                            <span class="value positive">{{ last_journey ? last_journey.winMatch : '-' }}</span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>
                                                                            <span class="label">{{ 'layout.values.draw'|trans }}</span>
                                                                            <span class="value nul">{{ last_journey ? last_journey.drawMatch : '-' }}</span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>
                                                                            <span class="label">{{ 'layout.values.lost'|trans }}</span>
                                                                            <span class="value negative">{{ last_journey ? last_journey.lostMatch : '-' }}</span>
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                                <td>
                                                    <table class="clearfix details-table">
                                                        <tr>
                                                            <td>
                                                                <span class="label">{{ 'layout.values.touchdown'|trans }}</span>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <span class="value positive">{{ last_journey ? last_journey.tdGive : '-' }}</span>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <span class="value negative">{{ last_journey ? last_journey.tdTake : '-' }}</span>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                                <td>
                                                    <table class="clearfix details-table">
                                                        <tr>
                                                            <td>
                                                                <span class="label">{{ 'layout.values.injury'|trans }}</span>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <span class="value positive">{{ last_journey ? last_journey.injuryGive : '-' }}</span>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <span class="value negative">{{ last_journey ? last_journey.injuryTake : '-' }}</span>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                                <td>
                                                    <table class="clearfix lines-table">
                                                        <tr>
                                                            <td>&nbsp;</td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <span class="label">{{ 'layout.values.pass'|trans }}</span>
                                                                <span class="value positive">{{ last_journey ? last_journey.pass : '-' }}</span>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <span class="label">{{ 'layout.values.cards'|trans }}</span>
                                                                <span class="value negative">{{ last_journey ? last_journey.redCard : '-' }}</span>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </article>
            {% endfor %}
        </div>
    </section>
{% endblock %}
