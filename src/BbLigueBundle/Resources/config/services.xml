<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">
    <parameters>
        <parameter key="bb.rosters.class">BbLigueBundle\Services\RulesService</parameter>
        <parameter key="bb.forms.user.team.class">BbLigueBundle\Form\Type\Team</parameter>
        <parameter key="bb.forms.user.team.flow">BbLigueBundle\Form\CreateTeamFlow</parameter>
        <parameter key="bb.forms.admin.ligue.class">BbLigueBundle\Form\Type\Ligue</parameter>
        <parameter key="bb.forms.admin.rule.class">BbLigueBundle\Form\Type\Rule</parameter>
        <parameter key="bb.twig.extension.class">BbLigueBundle\Twig\BbLigueTwigExtension</parameter>
        <parameter key="bb.upload.events.class">BbLigueBundle\EventListener\UploadDirPopulate</parameter>
    </parameters>

    <services>
        <service id="bb.twig.bbligue_extension" class="%bb.twig.extension.class%" public="false">
            <tag name="twig.extension" />
            <argument type="service" id="translator" />
        </service>
		<service id="bb.rules" class="%bb.rosters.class%">
			<argument type="service" id="doctrine.orm.entity_manager" />
			<argument type="service" id="translator" />
			<argument>%bb_ligue.rules%</argument>
		</service>
        <!-- <service id="bb.forms.user.team" class="%bb.forms.user.team.class%">
            <tag name="form.type" alias="obbml_forms_user_team" />
        </service> -->
        <service id="bb.forms.user.team"
                class="%bb.forms.user.team.flow%"
                parent="craue.form.flow"
                scope="request">
			<argument type="service" id="translator" />
			<argument type="service" id="bb.rules" />
        </service>
        <service id="bb.forms.admin.ligue" class="%bb.forms.admin.ligue.class%">
			<argument type="service" id="bb.rules" />
            <tag name="form.type" alias="obbml_forms_admin_ligue" />
        </service>
        <service id="bb.forms.admin.rule" class="%bb.forms.admin.rule.class%">
			<argument type="service" id="bb.rules" />
            <tag name="form.type" alias="obbml_forms_admin_rule" />
        </service>
        <service id="bb.upload.listener" class="%bb.upload.events.class%">
			<argument>%kernel.root_dir%</argument>
			<argument>%web_path%</argument>
			<argument>%upload_path%</argument>
            <tag name="doctrine.event_listener" event="postLoad" />
        </service>
    </services>
</container>
